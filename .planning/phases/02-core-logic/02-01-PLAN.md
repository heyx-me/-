# Phase 2 Plan: Core Logic (Unit)

## Goal
Secure the foundational utilities with high unit test coverage.

## Requirements
- [ ] **UNIT-01**: `rafi/utils/categorizer.js` has 90%+ coverage.
- [ ] **UNIT-02**: `rafi/utils/storage.js` is tested (mocking local storage/fs).
- [ ] **UNIT-03**: `rafi/utils/i18n.js` is tested (translation loading, language switching).

## Implementation Steps
1.  **Categorizer Tests**:
    -   Test exact matches.
    -   Test partial matches/keywords.
    -   Test fallback to 'General'.
2.  **Storage Tests**:
    -   Mock `localStorage`.
    -   Test `save`, `load`, `clear`.
    -   Test handling of JSON parsing errors.
3.  **i18n Tests**:
    -   Test `translate` function with valid keys.
    -   Test missing key handling (return key).
    -   Test language switching if applicable (or static load).

## Verification
- Run `npm test` and ensure all new tests pass.
